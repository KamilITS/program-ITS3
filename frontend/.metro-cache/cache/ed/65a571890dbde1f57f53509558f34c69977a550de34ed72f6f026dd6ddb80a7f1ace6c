{"dependencies":[{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.apiFetch = apiFetch;\n  exports.uploadFileWeb = uploadFileWeb;\n  exports.uploadFile = uploadFile;\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[0], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function apiFetch(endpoint, options = {}) {\n    const token = await AsyncStorage.default.getItem('session_token');\n    const headers = {\n      'Content-Type': 'application/json',\n      ...options.headers\n    };\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      method: options.method || 'GET',\n      headers,\n      body: options.body ? JSON.stringify(options.body) : undefined\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        detail: 'Błąd serwera'\n      }));\n      throw new Error(errorData.detail || 'Wystąpił błąd');\n    }\n    return response.json();\n  }\n\n  // Upload file for web platform using native File object\n  async function uploadFileWeb(endpoint, file) {\n    const token = await AsyncStorage.default.getItem('session_token');\n    const formData = new FormData();\n    formData.append('file', file, file.name);\n    const headers = {};\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      method: 'POST',\n      headers,\n      body: formData\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        detail: 'Błąd serwera'\n      }));\n      throw new Error(errorData.detail || 'Wystąpił błąd');\n    }\n    return response.json();\n  }\n  async function uploadFile(endpoint, file) {\n    const token = await AsyncStorage.default.getItem('session_token');\n    const formData = new FormData();\n\n    // Check if we're on web platform\n    if (false && file.uri.startsWith('blob:')) {\n      // Web platform - fetch the blob and create a File object\n      const response = await fetch(file.uri);\n      const blob = await response.blob();\n      const fileObj = new File([blob], file.name, {\n        type: file.type\n      });\n      formData.append('file', fileObj);\n    } else if (false && file.uri.startsWith('data:')) {\n      // Web platform with data URI - convert to blob\n      const response = await fetch(file.uri);\n      const blob = await response.blob();\n      const fileObj = new File([blob], file.name, {\n        type: file.type\n      });\n      formData.append('file', fileObj);\n    } else {\n      // Mobile platform - append as-is\n      formData.append('file', {\n        uri: file.uri,\n        name: file.name,\n        type: file.type\n      });\n    }\n    const headers = {};\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      method: 'POST',\n      headers,\n      body: formData\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        detail: 'Błąd serwera'\n      }));\n      throw new Error(errorData.detail || 'Wystąpił błąd');\n    }\n    return response.json();\n  }\n});","lineCount":109,"map":[[12,2,11,0,"exports"],[12,9,11,0],[12,10,11,0,"apiFetch"],[12,18,11,0],[12,21,11,0,"apiFetch"],[12,29,11,0],[13,2,38,0,"exports"],[13,9,38,0],[13,10,38,0,"uploadFileWeb"],[13,23,38,0],[13,26,38,0,"uploadFileWeb"],[13,39,38,0],[14,2,63,0,"exports"],[14,9,63,0],[14,10,63,0,"uploadFile"],[14,20,63,0],[14,23,63,0,"uploadFile"],[14,33,63,0],[15,2,1,0],[15,6,1,0,"_reactNativeAsyncStorageAsyncStorage"],[15,42,1,0],[15,45,1,0,"require"],[15,52,1,0],[15,53,1,0,"_dependencyMap"],[15,67,1,0],[16,2,1,0],[16,6,1,0,"AsyncStorage"],[16,18,1,0],[16,21,1,0,"_interopDefault"],[16,36,1,0],[16,37,1,0,"_reactNativeAsyncStorageAsyncStorage"],[16,73,1,0],[17,2,3,0],[17,8,3,6,"API_URL"],[17,15,3,13],[17,18,3,16,"process"],[17,25,3,23],[17,26,3,24,"env"],[17,29,3,27],[17,30,3,28,"EXPO_PUBLIC_BACKEND_URL"],[17,53,3,51],[17,57,3,55],[17,59,3,57],[18,2,11,7],[18,17,11,22,"apiFetch"],[18,25,11,30,"apiFetch"],[18,26,11,31,"endpoint"],[18,34,11,47],[18,36,11,49,"options"],[18,43,11,70],[18,46,11,73],[18,47,11,74],[18,48,11,75],[18,50,11,77],[19,4,12,2],[19,10,12,8,"token"],[19,15,12,13],[19,18,12,16],[19,24,12,22,"AsyncStorage"],[19,36,12,34],[19,37,12,34,"default"],[19,44,12,34],[19,45,12,35,"getItem"],[19,52,12,42],[19,53,12,43],[19,68,12,58],[19,69,12,59],[20,4,14,2],[20,10,14,8,"headers"],[20,17,14,39],[20,20,14,42],[21,6,15,4],[21,20,15,18],[21,22,15,20],[21,40,15,38],[22,6,16,4],[22,9,16,7,"options"],[22,16,16,14],[22,17,16,15,"headers"],[23,4,17,2],[23,5,17,3],[24,4,19,2],[24,8,19,6,"token"],[24,13,19,11],[24,15,19,13],[25,6,20,4,"headers"],[25,13,20,11],[25,14,20,12],[25,29,20,27],[25,30,20,28],[25,33,20,31],[25,43,20,41,"token"],[25,48,20,46],[25,50,20,48],[26,4,21,2],[27,4,23,2],[27,10,23,8,"response"],[27,18,23,16],[27,21,23,19],[27,27,23,25,"fetch"],[27,32,23,30],[27,33,23,31],[27,36,23,34,"API_URL"],[27,43,23,41],[27,46,23,44,"endpoint"],[27,54,23,52],[27,56,23,54],[27,58,23,56],[28,6,24,4,"method"],[28,12,24,10],[28,14,24,12,"options"],[28,21,24,19],[28,22,24,20,"method"],[28,28,24,26],[28,32,24,30],[28,37,24,35],[29,6,25,4,"headers"],[29,13,25,11],[30,6,26,4,"body"],[30,10,26,8],[30,12,26,10,"options"],[30,19,26,17],[30,20,26,18,"body"],[30,24,26,22],[30,27,26,25,"JSON"],[30,31,26,29],[30,32,26,30,"stringify"],[30,41,26,39],[30,42,26,40,"options"],[30,49,26,47],[30,50,26,48,"body"],[30,54,26,52],[30,55,26,53],[30,58,26,56,"undefined"],[31,4,27,2],[31,5,27,3],[31,6,27,4],[32,4,29,2],[32,8,29,6],[32,9,29,7,"response"],[32,17,29,15],[32,18,29,16,"ok"],[32,20,29,18],[32,22,29,20],[33,6,30,4],[33,12,30,10,"errorData"],[33,21,30,19],[33,24,30,22],[33,30,30,28,"response"],[33,38,30,36],[33,39,30,37,"json"],[33,43,30,41],[33,44,30,42],[33,45,30,43],[33,46,30,44,"catch"],[33,51,30,49],[33,52,30,50],[33,59,30,57],[34,8,30,59,"detail"],[34,14,30,65],[34,16,30,67],[35,6,30,82],[35,7,30,83],[35,8,30,84],[35,9,30,85],[36,6,31,4],[36,12,31,10],[36,16,31,14,"Error"],[36,21,31,19],[36,22,31,20,"errorData"],[36,31,31,29],[36,32,31,30,"detail"],[36,38,31,36],[36,42,31,40],[36,57,31,55],[36,58,31,56],[37,4,32,2],[38,4,34,2],[38,11,34,9,"response"],[38,19,34,17],[38,20,34,18,"json"],[38,24,34,22],[38,25,34,23],[38,26,34,24],[39,2,35,0],[41,2,37,0],[42,2,38,7],[42,17,38,22,"uploadFileWeb"],[42,30,38,35,"uploadFileWeb"],[42,31,38,36,"endpoint"],[42,39,38,52],[42,41,38,54,"file"],[42,45,38,64],[42,47,38,66],[43,4,39,2],[43,10,39,8,"token"],[43,15,39,13],[43,18,39,16],[43,24,39,22,"AsyncStorage"],[43,36,39,34],[43,37,39,34,"default"],[43,44,39,34],[43,45,39,35,"getItem"],[43,52,39,42],[43,53,39,43],[43,68,39,58],[43,69,39,59],[44,4,41,2],[44,10,41,8,"formData"],[44,18,41,16],[44,21,41,19],[44,25,41,23,"FormData"],[44,33,41,31],[44,34,41,32],[44,35,41,33],[45,4,42,2,"formData"],[45,12,42,10],[45,13,42,11,"append"],[45,19,42,17],[45,20,42,18],[45,26,42,24],[45,28,42,26,"file"],[45,32,42,30],[45,34,42,32,"file"],[45,38,42,36],[45,39,42,37,"name"],[45,43,42,41],[45,44,42,42],[46,4,44,2],[46,10,44,8,"headers"],[46,17,44,39],[46,20,44,42],[46,21,44,43],[46,22,44,44],[47,4,45,2],[47,8,45,6,"token"],[47,13,45,11],[47,15,45,13],[48,6,46,4,"headers"],[48,13,46,11],[48,14,46,12],[48,29,46,27],[48,30,46,28],[48,33,46,31],[48,43,46,41,"token"],[48,48,46,46],[48,50,46,48],[49,4,47,2],[50,4,49,2],[50,10,49,8,"response"],[50,18,49,16],[50,21,49,19],[50,27,49,25,"fetch"],[50,32,49,30],[50,33,49,31],[50,36,49,34,"API_URL"],[50,43,49,41],[50,46,49,44,"endpoint"],[50,54,49,52],[50,56,49,54],[50,58,49,56],[51,6,50,4,"method"],[51,12,50,10],[51,14,50,12],[51,20,50,18],[52,6,51,4,"headers"],[52,13,51,11],[53,6,52,4,"body"],[53,10,52,8],[53,12,52,10,"formData"],[54,4,53,2],[54,5,53,3],[54,6,53,4],[55,4,55,2],[55,8,55,6],[55,9,55,7,"response"],[55,17,55,15],[55,18,55,16,"ok"],[55,20,55,18],[55,22,55,20],[56,6,56,4],[56,12,56,10,"errorData"],[56,21,56,19],[56,24,56,22],[56,30,56,28,"response"],[56,38,56,36],[56,39,56,37,"json"],[56,43,56,41],[56,44,56,42],[56,45,56,43],[56,46,56,44,"catch"],[56,51,56,49],[56,52,56,50],[56,59,56,57],[57,8,56,59,"detail"],[57,14,56,65],[57,16,56,67],[58,6,56,82],[58,7,56,83],[58,8,56,84],[58,9,56,85],[59,6,57,4],[59,12,57,10],[59,16,57,14,"Error"],[59,21,57,19],[59,22,57,20,"errorData"],[59,31,57,29],[59,32,57,30,"detail"],[59,38,57,36],[59,42,57,40],[59,57,57,55],[59,58,57,56],[60,4,58,2],[61,4,60,2],[61,11,60,9,"response"],[61,19,60,17],[61,20,60,18,"json"],[61,24,60,22],[61,25,60,23],[61,26,60,24],[62,2,61,0],[63,2,63,7],[63,17,63,22,"uploadFile"],[63,27,63,32,"uploadFile"],[63,28,63,33,"endpoint"],[63,36,63,49],[63,38,63,51,"file"],[63,42,63,100],[63,44,63,102],[64,4,64,2],[64,10,64,8,"token"],[64,15,64,13],[64,18,64,16],[64,24,64,22,"AsyncStorage"],[64,36,64,34],[64,37,64,34,"default"],[64,44,64,34],[64,45,64,35,"getItem"],[64,52,64,42],[64,53,64,43],[64,68,64,58],[64,69,64,59],[65,4,66,2],[65,10,66,8,"formData"],[65,18,66,16],[65,21,66,19],[65,25,66,23,"FormData"],[65,33,66,31],[65,34,66,32],[65,35,66,33],[67,4,68,2],[68,4,69,2],[68,8,69,6],[68,17,69,39,"file"],[68,21,69,43],[68,22,69,44,"uri"],[68,25,69,47],[68,26,69,48,"startsWith"],[68,36,69,58],[68,37,69,59],[68,44,69,66],[68,45,69,67],[68,47,69,69],[69,6,70,4],[70,6,71,4],[70,12,71,10,"response"],[70,20,71,18],[70,23,71,21],[70,29,71,27,"fetch"],[70,34,71,32],[70,35,71,33,"file"],[70,39,71,37],[70,40,71,38,"uri"],[70,43,71,41],[70,44,71,42],[71,6,72,4],[71,12,72,10,"blob"],[71,16,72,14],[71,19,72,17],[71,25,72,23,"response"],[71,33,72,31],[71,34,72,32,"blob"],[71,38,72,36],[71,39,72,37],[71,40,72,38],[72,6,73,4],[72,12,73,10,"fileObj"],[72,19,73,17],[72,22,73,20],[72,26,73,24,"File"],[72,30,73,28],[72,31,73,29],[72,32,73,30,"blob"],[72,36,73,34],[72,37,73,35],[72,39,73,37,"file"],[72,43,73,41],[72,44,73,42,"name"],[72,48,73,46],[72,50,73,48],[73,8,73,50,"type"],[73,12,73,54],[73,14,73,56,"file"],[73,18,73,60],[73,19,73,61,"type"],[74,6,73,66],[74,7,73,67],[74,8,73,68],[75,6,74,4,"formData"],[75,14,74,12],[75,15,74,13,"append"],[75,21,74,19],[75,22,74,20],[75,28,74,26],[75,30,74,28,"fileObj"],[75,37,74,35],[75,38,74,36],[76,4,75,2],[76,5,75,3],[76,11,75,9],[76,15,75,13],[76,24,75,46,"file"],[76,28,75,50],[76,29,75,51,"uri"],[76,32,75,54],[76,33,75,55,"startsWith"],[76,43,75,65],[76,44,75,66],[76,51,75,73],[76,52,75,74],[76,54,75,76],[77,6,76,4],[78,6,77,4],[78,12,77,10,"response"],[78,20,77,18],[78,23,77,21],[78,29,77,27,"fetch"],[78,34,77,32],[78,35,77,33,"file"],[78,39,77,37],[78,40,77,38,"uri"],[78,43,77,41],[78,44,77,42],[79,6,78,4],[79,12,78,10,"blob"],[79,16,78,14],[79,19,78,17],[79,25,78,23,"response"],[79,33,78,31],[79,34,78,32,"blob"],[79,38,78,36],[79,39,78,37],[79,40,78,38],[80,6,79,4],[80,12,79,10,"fileObj"],[80,19,79,17],[80,22,79,20],[80,26,79,24,"File"],[80,30,79,28],[80,31,79,29],[80,32,79,30,"blob"],[80,36,79,34],[80,37,79,35],[80,39,79,37,"file"],[80,43,79,41],[80,44,79,42,"name"],[80,48,79,46],[80,50,79,48],[81,8,79,50,"type"],[81,12,79,54],[81,14,79,56,"file"],[81,18,79,60],[81,19,79,61,"type"],[82,6,79,66],[82,7,79,67],[82,8,79,68],[83,6,80,4,"formData"],[83,14,80,12],[83,15,80,13,"append"],[83,21,80,19],[83,22,80,20],[83,28,80,26],[83,30,80,28,"fileObj"],[83,37,80,35],[83,38,80,36],[84,4,81,2],[84,5,81,3],[84,11,81,9],[85,6,82,4],[86,6,83,4,"formData"],[86,14,83,12],[86,15,83,13,"append"],[86,21,83,19],[86,22,83,20],[86,28,83,26],[86,30,83,28],[87,8,84,6,"uri"],[87,11,84,9],[87,13,84,11,"file"],[87,17,84,15],[87,18,84,16,"uri"],[87,21,84,19],[88,8,85,6,"name"],[88,12,85,10],[88,14,85,12,"file"],[88,18,85,16],[88,19,85,17,"name"],[88,23,85,21],[89,8,86,6,"type"],[89,12,86,10],[89,14,86,12,"file"],[89,18,86,16],[89,19,86,17,"type"],[90,6,87,4],[90,7,87,12],[90,8,87,13],[91,4,88,2],[92,4,90,2],[92,10,90,8,"headers"],[92,17,90,39],[92,20,90,42],[92,21,90,43],[92,22,90,44],[93,4,91,2],[93,8,91,6,"token"],[93,13,91,11],[93,15,91,13],[94,6,92,4,"headers"],[94,13,92,11],[94,14,92,12],[94,29,92,27],[94,30,92,28],[94,33,92,31],[94,43,92,41,"token"],[94,48,92,46],[94,50,92,48],[95,4,93,2],[96,4,95,2],[96,10,95,8,"response"],[96,18,95,16],[96,21,95,19],[96,27,95,25,"fetch"],[96,32,95,30],[96,33,95,31],[96,36,95,34,"API_URL"],[96,43,95,41],[96,46,95,44,"endpoint"],[96,54,95,52],[96,56,95,54],[96,58,95,56],[97,6,96,4,"method"],[97,12,96,10],[97,14,96,12],[97,20,96,18],[98,6,97,4,"headers"],[98,13,97,11],[99,6,98,4,"body"],[99,10,98,8],[99,12,98,10,"formData"],[100,4,99,2],[100,5,99,3],[100,6,99,4],[101,4,101,2],[101,8,101,6],[101,9,101,7,"response"],[101,17,101,15],[101,18,101,16,"ok"],[101,20,101,18],[101,22,101,20],[102,6,102,4],[102,12,102,10,"errorData"],[102,21,102,19],[102,24,102,22],[102,30,102,28,"response"],[102,38,102,36],[102,39,102,37,"json"],[102,43,102,41],[102,44,102,42],[102,45,102,43],[102,46,102,44,"catch"],[102,51,102,49],[102,52,102,50],[102,59,102,57],[103,8,102,59,"detail"],[103,14,102,65],[103,16,102,67],[104,6,102,82],[104,7,102,83],[104,8,102,84],[104,9,102,85],[105,6,103,4],[105,12,103,10],[105,16,103,14,"Error"],[105,21,103,19],[105,22,103,20,"errorData"],[105,31,103,29],[105,32,103,30,"detail"],[105,38,103,36],[105,42,103,40],[105,57,103,55],[105,58,103,56],[106,4,104,2],[107,4,106,2],[107,11,106,9,"response"],[107,19,106,17],[107,20,106,18,"json"],[107,24,106,22],[107,25,106,23],[107,26,106,24],[108,2,107,0],[109,0,107,1],[109,3]],"functionMap":{"names":["<global>","apiFetch","response.json._catch$argument_0","uploadFileWeb","uploadFile"],"mappings":"AAA;OCU;kDCmB,kCD;CDK;OGG;kDDkB,kCC;CHK;OIE;kDFuC,kCE;CJK"},"hasCjsExports":false},"type":"js/module"}]}