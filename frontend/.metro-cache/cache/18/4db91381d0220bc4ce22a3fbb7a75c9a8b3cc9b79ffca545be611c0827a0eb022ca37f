{"dependencies":[{"name":"../tzTokenizeDate/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":60,"index":60}}],"key":"LE3aa/YAQLBfAqjc9H7jYVKEbU8=","exportNames":["*"],"imports":1}},{"name":"../newDateUTC/index.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":61},"end":{"line":2,"column":52,"index":113}}],"key":"rOaDkouorb+dabETz8xuW3pZ9JE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.tzParseTimezone = tzParseTimezone;\n  var _tzTokenizeDateIndexJs = require(_dependencyMap[0], \"../tzTokenizeDate/index.js\");\n  var _newDateUTCIndexJs = require(_dependencyMap[1], \"../newDateUTC/index.js\");\n  const MILLISECONDS_IN_HOUR = 3600000;\n  const MILLISECONDS_IN_MINUTE = 60000;\n  const patterns = {\n    timezone: /([Z+-].*)$/,\n    timezoneZ: /^(Z)$/,\n    timezoneHH: /^([+-]\\d{2})$/,\n    timezoneHHMM: /^([+-])(\\d{2}):?(\\d{2})$/\n  };\n  // Parse constious time zone offset formats to an offset in milliseconds\n  function tzParseTimezone(timezoneString, date, isUtcDate) {\n    // Empty string\n    if (!timezoneString) {\n      return 0;\n    }\n    // Z\n    let token = patterns.timezoneZ.exec(timezoneString);\n    if (token) {\n      return 0;\n    }\n    let hours;\n    let absoluteOffset;\n    // ±hh\n    token = patterns.timezoneHH.exec(timezoneString);\n    if (token) {\n      hours = parseInt(token[1], 10);\n      if (!validateTimezone(hours)) {\n        return NaN;\n      }\n      return -(hours * MILLISECONDS_IN_HOUR);\n    }\n    // ±hh:mm or ±hhmm\n    token = patterns.timezoneHHMM.exec(timezoneString);\n    if (token) {\n      hours = parseInt(token[2], 10);\n      const minutes = parseInt(token[3], 10);\n      if (!validateTimezone(hours, minutes)) {\n        return NaN;\n      }\n      absoluteOffset = Math.abs(hours) * MILLISECONDS_IN_HOUR + minutes * MILLISECONDS_IN_MINUTE;\n      return token[1] === '+' ? -absoluteOffset : absoluteOffset;\n    }\n    // IANA time zone\n    if (isValidTimezoneIANAString(timezoneString)) {\n      date = new Date(date || Date.now());\n      const utcDate = isUtcDate ? date : toUtcDate(date);\n      const offset = calcOffset(utcDate, timezoneString);\n      const fixedOffset = isUtcDate ? offset : fixOffset(date, offset, timezoneString);\n      return -fixedOffset;\n    }\n    return NaN;\n  }\n  function toUtcDate(date) {\n    return (0, _newDateUTCIndexJs.newDateUTC)(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\n  }\n  function calcOffset(date, timezoneString) {\n    const tokens = (0, _tzTokenizeDateIndexJs.tzTokenizeDate)(date, timezoneString);\n    // ms dropped because it's not provided by tzTokenizeDate\n    const asUTC = (0, _newDateUTCIndexJs.newDateUTC)(tokens[0], tokens[1] - 1, tokens[2], tokens[3] % 24, tokens[4], tokens[5], 0).getTime();\n    let asTS = date.getTime();\n    const over = asTS % 1000;\n    asTS -= over >= 0 ? over : 1000 + over;\n    return asUTC - asTS;\n  }\n  function fixOffset(date, offset, timezoneString) {\n    const localTS = date.getTime();\n    // Our UTC time is just a guess because our offset is just a guess\n    let utcGuess = localTS - offset;\n    // Test whether the zone matches the offset for this ts\n    const o2 = calcOffset(new Date(utcGuess), timezoneString);\n    // If so, offset didn't change, and we're done\n    if (offset === o2) {\n      return offset;\n    }\n    // If not, change the ts by the difference in the offset\n    utcGuess -= o2 - offset;\n    // If that gives us the local time we want, we're done\n    const o3 = calcOffset(new Date(utcGuess), timezoneString);\n    if (o2 === o3) {\n      return o2;\n    }\n    // If it's different, we're in a hole time. The offset has changed, but we don't adjust the time\n    return Math.max(o2, o3);\n  }\n  function validateTimezone(hours, minutes) {\n    return -23 <= hours && hours <= 23 && (minutes == null || 0 <= minutes && minutes <= 59);\n  }\n  const validIANATimezoneCache = {};\n  function isValidTimezoneIANAString(timeZoneString) {\n    if (validIANATimezoneCache[timeZoneString]) return true;\n    try {\n      new Intl.DateTimeFormat(undefined, {\n        timeZone: timeZoneString\n      });\n      validIANATimezoneCache[timeZoneString] = true;\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n});","lineCount":109,"map":[[7,2,12,0,"exports"],[7,9,12,0],[7,10,12,0,"tzParseTimezone"],[7,25,12,0],[7,28,12,0,"tzParseTimezone"],[7,43,12,0],[8,2,1,0],[8,6,1,0,"_tzTokenizeDateIndexJs"],[8,28,1,0],[8,31,1,0,"require"],[8,38,1,0],[8,39,1,0,"_dependencyMap"],[8,53,1,0],[9,2,2,0],[9,6,2,0,"_newDateUTCIndexJs"],[9,24,2,0],[9,27,2,0,"require"],[9,34,2,0],[9,35,2,0,"_dependencyMap"],[9,49,2,0],[10,2,3,0],[10,8,3,6,"MILLISECONDS_IN_HOUR"],[10,28,3,26],[10,31,3,29],[10,38,3,36],[11,2,4,0],[11,8,4,6,"MILLISECONDS_IN_MINUTE"],[11,30,4,28],[11,33,4,31],[11,38,4,36],[12,2,5,0],[12,8,5,6,"patterns"],[12,16,5,14],[12,19,5,17],[13,4,6,4,"timezone"],[13,12,6,12],[13,14,6,14],[13,26,6,26],[14,4,7,4,"timezoneZ"],[14,13,7,13],[14,15,7,15],[14,22,7,22],[15,4,8,4,"timezoneHH"],[15,14,8,14],[15,16,8,16],[15,31,8,31],[16,4,9,4,"timezoneHHMM"],[16,16,9,16],[16,18,9,18],[17,2,10,0],[17,3,10,1],[18,2,11,0],[19,2,12,7],[19,11,12,16,"tzParseTimezone"],[19,26,12,31,"tzParseTimezone"],[19,27,12,32,"timezoneString"],[19,41,12,46],[19,43,12,48,"date"],[19,47,12,52],[19,49,12,54,"isUtcDate"],[19,58,12,63],[19,60,12,65],[20,4,13,4],[21,4,14,4],[21,8,14,8],[21,9,14,9,"timezoneString"],[21,23,14,23],[21,25,14,25],[22,6,15,8],[22,13,15,15],[22,14,15,16],[23,4,16,4],[24,4,17,4],[25,4,18,4],[25,8,18,8,"token"],[25,13,18,13],[25,16,18,16,"patterns"],[25,24,18,24],[25,25,18,25,"timezoneZ"],[25,34,18,34],[25,35,18,35,"exec"],[25,39,18,39],[25,40,18,40,"timezoneString"],[25,54,18,54],[25,55,18,55],[26,4,19,4],[26,8,19,8,"token"],[26,13,19,13],[26,15,19,15],[27,6,20,8],[27,13,20,15],[27,14,20,16],[28,4,21,4],[29,4,22,4],[29,8,22,8,"hours"],[29,13,22,13],[30,4,23,4],[30,8,23,8,"absoluteOffset"],[30,22,23,22],[31,4,24,4],[32,4,25,4,"token"],[32,9,25,9],[32,12,25,12,"patterns"],[32,20,25,20],[32,21,25,21,"timezoneHH"],[32,31,25,31],[32,32,25,32,"exec"],[32,36,25,36],[32,37,25,37,"timezoneString"],[32,51,25,51],[32,52,25,52],[33,4,26,4],[33,8,26,8,"token"],[33,13,26,13],[33,15,26,15],[34,6,27,8,"hours"],[34,11,27,13],[34,14,27,16,"parseInt"],[34,22,27,24],[34,23,27,25,"token"],[34,28,27,30],[34,29,27,31],[34,30,27,32],[34,31,27,33],[34,33,27,35],[34,35,27,37],[34,36,27,38],[35,6,28,8],[35,10,28,12],[35,11,28,13,"validateTimezone"],[35,27,28,29],[35,28,28,30,"hours"],[35,33,28,35],[35,34,28,36],[35,36,28,38],[36,8,29,12],[36,15,29,19,"NaN"],[36,18,29,22],[37,6,30,8],[38,6,31,8],[38,13,31,15],[38,15,31,17,"hours"],[38,20,31,22],[38,23,31,25,"MILLISECONDS_IN_HOUR"],[38,43,31,45],[38,44,31,46],[39,4,32,4],[40,4,33,4],[41,4,34,4,"token"],[41,9,34,9],[41,12,34,12,"patterns"],[41,20,34,20],[41,21,34,21,"timezoneHHMM"],[41,33,34,33],[41,34,34,34,"exec"],[41,38,34,38],[41,39,34,39,"timezoneString"],[41,53,34,53],[41,54,34,54],[42,4,35,4],[42,8,35,8,"token"],[42,13,35,13],[42,15,35,15],[43,6,36,8,"hours"],[43,11,36,13],[43,14,36,16,"parseInt"],[43,22,36,24],[43,23,36,25,"token"],[43,28,36,30],[43,29,36,31],[43,30,36,32],[43,31,36,33],[43,33,36,35],[43,35,36,37],[43,36,36,38],[44,6,37,8],[44,12,37,14,"minutes"],[44,19,37,21],[44,22,37,24,"parseInt"],[44,30,37,32],[44,31,37,33,"token"],[44,36,37,38],[44,37,37,39],[44,38,37,40],[44,39,37,41],[44,41,37,43],[44,43,37,45],[44,44,37,46],[45,6,38,8],[45,10,38,12],[45,11,38,13,"validateTimezone"],[45,27,38,29],[45,28,38,30,"hours"],[45,33,38,35],[45,35,38,37,"minutes"],[45,42,38,44],[45,43,38,45],[45,45,38,47],[46,8,39,12],[46,15,39,19,"NaN"],[46,18,39,22],[47,6,40,8],[48,6,41,8,"absoluteOffset"],[48,20,41,22],[48,23,41,25,"Math"],[48,27,41,29],[48,28,41,30,"abs"],[48,31,41,33],[48,32,41,34,"hours"],[48,37,41,39],[48,38,41,40],[48,41,41,43,"MILLISECONDS_IN_HOUR"],[48,61,41,63],[48,64,41,66,"minutes"],[48,71,41,73],[48,74,41,76,"MILLISECONDS_IN_MINUTE"],[48,96,41,98],[49,6,42,8],[49,13,42,15,"token"],[49,18,42,20],[49,19,42,21],[49,20,42,22],[49,21,42,23],[49,26,42,28],[49,29,42,31],[49,32,42,34],[49,33,42,35,"absoluteOffset"],[49,47,42,49],[49,50,42,52,"absoluteOffset"],[49,64,42,66],[50,4,43,4],[51,4,44,4],[52,4,45,4],[52,8,45,8,"isValidTimezoneIANAString"],[52,33,45,33],[52,34,45,34,"timezoneString"],[52,48,45,48],[52,49,45,49],[52,51,45,51],[53,6,46,8,"date"],[53,10,46,12],[53,13,46,15],[53,17,46,19,"Date"],[53,21,46,23],[53,22,46,24,"date"],[53,26,46,28],[53,30,46,32,"Date"],[53,34,46,36],[53,35,46,37,"now"],[53,38,46,40],[53,39,46,41],[53,40,46,42],[53,41,46,43],[54,6,47,8],[54,12,47,14,"utcDate"],[54,19,47,21],[54,22,47,24,"isUtcDate"],[54,31,47,33],[54,34,47,36,"date"],[54,38,47,40],[54,41,47,43,"toUtcDate"],[54,50,47,52],[54,51,47,53,"date"],[54,55,47,57],[54,56,47,58],[55,6,48,8],[55,12,48,14,"offset"],[55,18,48,20],[55,21,48,23,"calcOffset"],[55,31,48,33],[55,32,48,34,"utcDate"],[55,39,48,41],[55,41,48,43,"timezoneString"],[55,55,48,57],[55,56,48,58],[56,6,49,8],[56,12,49,14,"fixedOffset"],[56,23,49,25],[56,26,49,28,"isUtcDate"],[56,35,49,37],[56,38,49,40,"offset"],[56,44,49,46],[56,47,49,49,"fixOffset"],[56,56,49,58],[56,57,49,59,"date"],[56,61,49,63],[56,63,49,65,"offset"],[56,69,49,71],[56,71,49,73,"timezoneString"],[56,85,49,87],[56,86,49,88],[57,6,50,8],[57,13,50,15],[57,14,50,16,"fixedOffset"],[57,25,50,27],[58,4,51,4],[59,4,52,4],[59,11,52,11,"NaN"],[59,14,52,14],[60,2,53,0],[61,2,54,0],[61,11,54,9,"toUtcDate"],[61,20,54,18,"toUtcDate"],[61,21,54,19,"date"],[61,25,54,23],[61,27,54,25],[62,4,55,4],[62,11,55,11],[62,15,55,11,"newDateUTC"],[62,33,55,21],[62,34,55,21,"newDateUTC"],[62,44,55,21],[62,46,55,22,"date"],[62,50,55,26],[62,51,55,27,"getFullYear"],[62,62,55,38],[62,63,55,39],[62,64,55,40],[62,66,55,42,"date"],[62,70,55,46],[62,71,55,47,"getMonth"],[62,79,55,55],[62,80,55,56],[62,81,55,57],[62,83,55,59,"date"],[62,87,55,63],[62,88,55,64,"getDate"],[62,95,55,71],[62,96,55,72],[62,97,55,73],[62,99,55,75,"date"],[62,103,55,79],[62,104,55,80,"getHours"],[62,112,55,88],[62,113,55,89],[62,114,55,90],[62,116,55,92,"date"],[62,120,55,96],[62,121,55,97,"getMinutes"],[62,131,55,107],[62,132,55,108],[62,133,55,109],[62,135,55,111,"date"],[62,139,55,115],[62,140,55,116,"getSeconds"],[62,150,55,126],[62,151,55,127],[62,152,55,128],[62,154,55,130,"date"],[62,158,55,134],[62,159,55,135,"getMilliseconds"],[62,174,55,150],[62,175,55,151],[62,176,55,152],[62,177,55,153],[63,2,56,0],[64,2,57,0],[64,11,57,9,"calcOffset"],[64,21,57,19,"calcOffset"],[64,22,57,20,"date"],[64,26,57,24],[64,28,57,26,"timezoneString"],[64,42,57,40],[64,44,57,42],[65,4,58,4],[65,10,58,10,"tokens"],[65,16,58,16],[65,19,58,19],[65,23,58,19,"tzTokenizeDate"],[65,45,58,33],[65,46,58,33,"tzTokenizeDate"],[65,60,58,33],[65,62,58,34,"date"],[65,66,58,38],[65,68,58,40,"timezoneString"],[65,82,58,54],[65,83,58,55],[66,4,59,4],[67,4,60,4],[67,10,60,10,"asUTC"],[67,15,60,15],[67,18,60,18],[67,22,60,18,"newDateUTC"],[67,40,60,28],[67,41,60,28,"newDateUTC"],[67,51,60,28],[67,53,60,29,"tokens"],[67,59,60,35],[67,60,60,36],[67,61,60,37],[67,62,60,38],[67,64,60,40,"tokens"],[67,70,60,46],[67,71,60,47],[67,72,60,48],[67,73,60,49],[67,76,60,52],[67,77,60,53],[67,79,60,55,"tokens"],[67,85,60,61],[67,86,60,62],[67,87,60,63],[67,88,60,64],[67,90,60,66,"tokens"],[67,96,60,72],[67,97,60,73],[67,98,60,74],[67,99,60,75],[67,102,60,78],[67,104,60,80],[67,106,60,82,"tokens"],[67,112,60,88],[67,113,60,89],[67,114,60,90],[67,115,60,91],[67,117,60,93,"tokens"],[67,123,60,99],[67,124,60,100],[67,125,60,101],[67,126,60,102],[67,128,60,104],[67,129,60,105],[67,130,60,106],[67,131,60,107,"getTime"],[67,138,60,114],[67,139,60,115],[67,140,60,116],[68,4,61,4],[68,8,61,8,"asTS"],[68,12,61,12],[68,15,61,15,"date"],[68,19,61,19],[68,20,61,20,"getTime"],[68,27,61,27],[68,28,61,28],[68,29,61,29],[69,4,62,4],[69,10,62,10,"over"],[69,14,62,14],[69,17,62,17,"asTS"],[69,21,62,21],[69,24,62,24],[69,28,62,28],[70,4,63,4,"asTS"],[70,8,63,8],[70,12,63,12,"over"],[70,16,63,16],[70,20,63,20],[70,21,63,21],[70,24,63,24,"over"],[70,28,63,28],[70,31,63,31],[70,35,63,35],[70,38,63,38,"over"],[70,42,63,42],[71,4,64,4],[71,11,64,11,"asUTC"],[71,16,64,16],[71,19,64,19,"asTS"],[71,23,64,23],[72,2,65,0],[73,2,66,0],[73,11,66,9,"fixOffset"],[73,20,66,18,"fixOffset"],[73,21,66,19,"date"],[73,25,66,23],[73,27,66,25,"offset"],[73,33,66,31],[73,35,66,33,"timezoneString"],[73,49,66,47],[73,51,66,49],[74,4,67,4],[74,10,67,10,"localTS"],[74,17,67,17],[74,20,67,20,"date"],[74,24,67,24],[74,25,67,25,"getTime"],[74,32,67,32],[74,33,67,33],[74,34,67,34],[75,4,68,4],[76,4,69,4],[76,8,69,8,"utcGuess"],[76,16,69,16],[76,19,69,19,"localTS"],[76,26,69,26],[76,29,69,29,"offset"],[76,35,69,35],[77,4,70,4],[78,4,71,4],[78,10,71,10,"o2"],[78,12,71,12],[78,15,71,15,"calcOffset"],[78,25,71,25],[78,26,71,26],[78,30,71,30,"Date"],[78,34,71,34],[78,35,71,35,"utcGuess"],[78,43,71,43],[78,44,71,44],[78,46,71,46,"timezoneString"],[78,60,71,60],[78,61,71,61],[79,4,72,4],[80,4,73,4],[80,8,73,8,"offset"],[80,14,73,14],[80,19,73,19,"o2"],[80,21,73,21],[80,23,73,23],[81,6,74,8],[81,13,74,15,"offset"],[81,19,74,21],[82,4,75,4],[83,4,76,4],[84,4,77,4,"utcGuess"],[84,12,77,12],[84,16,77,16,"o2"],[84,18,77,18],[84,21,77,21,"offset"],[84,27,77,27],[85,4,78,4],[86,4,79,4],[86,10,79,10,"o3"],[86,12,79,12],[86,15,79,15,"calcOffset"],[86,25,79,25],[86,26,79,26],[86,30,79,30,"Date"],[86,34,79,34],[86,35,79,35,"utcGuess"],[86,43,79,43],[86,44,79,44],[86,46,79,46,"timezoneString"],[86,60,79,60],[86,61,79,61],[87,4,80,4],[87,8,80,8,"o2"],[87,10,80,10],[87,15,80,15,"o3"],[87,17,80,17],[87,19,80,19],[88,6,81,8],[88,13,81,15,"o2"],[88,15,81,17],[89,4,82,4],[90,4,83,4],[91,4,84,4],[91,11,84,11,"Math"],[91,15,84,15],[91,16,84,16,"max"],[91,19,84,19],[91,20,84,20,"o2"],[91,22,84,22],[91,24,84,24,"o3"],[91,26,84,26],[91,27,84,27],[92,2,85,0],[93,2,86,0],[93,11,86,9,"validateTimezone"],[93,27,86,25,"validateTimezone"],[93,28,86,26,"hours"],[93,33,86,31],[93,35,86,33,"minutes"],[93,42,86,40],[93,44,86,42],[94,4,87,4],[94,11,87,11],[94,12,87,12],[94,14,87,14],[94,18,87,18,"hours"],[94,23,87,23],[94,27,87,27,"hours"],[94,32,87,32],[94,36,87,36],[94,38,87,38],[94,43,87,43,"minutes"],[94,50,87,50],[94,54,87,54],[94,58,87,58],[94,62,87,63],[94,63,87,64],[94,67,87,68,"minutes"],[94,74,87,75],[94,78,87,79,"minutes"],[94,85,87,86],[94,89,87,90],[94,91,87,93],[94,92,87,94],[95,2,88,0],[96,2,89,0],[96,8,89,6,"validIANATimezoneCache"],[96,30,89,28],[96,33,89,31],[96,34,89,32],[96,35,89,33],[97,2,90,0],[97,11,90,9,"isValidTimezoneIANAString"],[97,36,90,34,"isValidTimezoneIANAString"],[97,37,90,35,"timeZoneString"],[97,51,90,49],[97,53,90,51],[98,4,91,4],[98,8,91,8,"validIANATimezoneCache"],[98,30,91,30],[98,31,91,31,"timeZoneString"],[98,45,91,45],[98,46,91,46],[98,48,92,8],[98,55,92,15],[98,59,92,19],[99,4,93,4],[99,8,93,8],[100,6,94,8],[100,10,94,12,"Intl"],[100,14,94,16],[100,15,94,17,"DateTimeFormat"],[100,29,94,31],[100,30,94,32,"undefined"],[100,39,94,41],[100,41,94,43],[101,8,94,45,"timeZone"],[101,16,94,53],[101,18,94,55,"timeZoneString"],[102,6,94,70],[102,7,94,71],[102,8,94,72],[103,6,95,8,"validIANATimezoneCache"],[103,28,95,30],[103,29,95,31,"timeZoneString"],[103,43,95,45],[103,44,95,46],[103,47,95,49],[103,51,95,53],[104,6,96,8],[104,13,96,15],[104,17,96,19],[105,4,97,4],[105,5,97,5],[105,6,98,4],[105,13,98,11,"error"],[105,18,98,16],[105,20,98,18],[106,6,99,8],[106,13,99,15],[106,18,99,20],[107,4,100,4],[108,2,101,0],[109,0,101,1],[109,3]],"functionMap":{"names":["<global>","tzParseTimezone","toUtcDate","calcOffset","fixOffset","validateTimezone","isValidTimezoneIANAString"],"mappings":"AAA;OCW;CDyC;AEC;CFE;AGC;CHQ;AIC;CJmB;AKC;CLE;AME;CNW"},"hasCjsExports":false},"type":"js/module"}]}