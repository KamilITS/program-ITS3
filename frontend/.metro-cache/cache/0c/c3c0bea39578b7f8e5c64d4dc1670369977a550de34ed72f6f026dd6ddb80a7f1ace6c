{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":69,"index":69}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.apiFetch = apiFetch;\n  exports.uploadFileWeb = uploadFileWeb;\n  exports.uploadFile = uploadFile;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  async function apiFetch(endpoint, options = {}) {\n    const token = await AsyncStorage.default.getItem('session_token');\n    const headers = {\n      'Content-Type': 'application/json',\n      ...options.headers\n    };\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      method: options.method || 'GET',\n      headers,\n      body: options.body ? JSON.stringify(options.body) : undefined\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        detail: 'Błąd serwera'\n      }));\n      throw new Error(errorData.detail || 'Wystąpił błąd');\n    }\n    return response.json();\n  }\n\n  // Upload file for web platform using native File object\n  async function uploadFileWeb(endpoint, file) {\n    const token = await AsyncStorage.default.getItem('session_token');\n    const formData = new FormData();\n    formData.append('file', file, file.name);\n    const headers = {};\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      method: 'POST',\n      headers,\n      body: formData\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        detail: 'Błąd serwera'\n      }));\n      throw new Error(errorData.detail || 'Wystąpił błąd');\n    }\n    return response.json();\n  }\n  async function uploadFile(endpoint, file) {\n    const token = await AsyncStorage.default.getItem('session_token');\n    const formData = new FormData();\n\n    // Check if we're on web platform\n    if (typeof window !== 'undefined' && file.uri.startsWith('blob:')) {\n      // Web platform - fetch the blob and create a File object\n      const response = await fetch(file.uri);\n      const blob = await response.blob();\n      const fileObj = new File([blob], file.name, {\n        type: file.type\n      });\n      formData.append('file', fileObj);\n    } else if (typeof window !== 'undefined' && file.uri.startsWith('data:')) {\n      // Web platform with data URI - convert to blob\n      const response = await fetch(file.uri);\n      const blob = await response.blob();\n      const fileObj = new File([blob], file.name, {\n        type: file.type\n      });\n      formData.append('file', fileObj);\n    } else {\n      // Mobile platform - append as-is\n      formData.append('file', {\n        uri: file.uri,\n        name: file.name,\n        type: file.type\n      });\n    }\n    const headers = {};\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const response = await fetch(`${API_URL}${endpoint}`, {\n      method: 'POST',\n      headers,\n      body: formData\n    });\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({\n        detail: 'Błąd serwera'\n      }));\n      throw new Error(errorData.detail || 'Wystąpił błąd');\n    }\n    return response.json();\n  }\n});","lineCount":110,"map":[[12,2,11,0,"exports"],[12,9,11,0],[12,10,11,0,"apiFetch"],[12,18,11,0],[12,21,11,0,"apiFetch"],[12,29,11,0],[13,2,38,0,"exports"],[13,9,38,0],[13,10,38,0,"uploadFileWeb"],[13,23,38,0],[13,26,38,0,"uploadFileWeb"],[13,39,38,0],[14,2,63,0,"exports"],[14,9,63,0],[14,10,63,0,"uploadFile"],[14,20,63,0],[14,23,63,0,"uploadFile"],[14,33,63,0],[15,2,107,1],[15,6,107,1,"_expoVirtualEnv"],[15,21,107,1],[15,24,107,1,"require"],[15,31,107,1],[15,32,107,1,"_dependencyMap"],[15,46,107,1],[16,2,1,0],[16,6,1,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,1,0],[16,45,1,0,"require"],[16,52,1,0],[16,53,1,0,"_dependencyMap"],[16,67,1,0],[17,2,1,0],[17,6,1,0,"AsyncStorage"],[17,18,1,0],[17,21,1,0,"_interopDefault"],[17,36,1,0],[17,37,1,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,1,0],[18,2,3,0],[18,8,3,6,"API_URL"],[18,15,3,13],[18,18,3,16,"_expoVirtualEnv"],[18,33,3,16],[18,34,3,16,"env"],[18,37,3,16],[18,38,3,16,"EXPO_PUBLIC_BACKEND_URL"],[18,61,3,16],[18,65,3,55],[18,67,3,57],[19,2,11,7],[19,17,11,22,"apiFetch"],[19,25,11,30,"apiFetch"],[19,26,11,31,"endpoint"],[19,34,11,47],[19,36,11,49,"options"],[19,43,11,70],[19,46,11,73],[19,47,11,74],[19,48,11,75],[19,50,11,77],[20,4,12,2],[20,10,12,8,"token"],[20,15,12,13],[20,18,12,16],[20,24,12,22,"AsyncStorage"],[20,36,12,34],[20,37,12,34,"default"],[20,44,12,34],[20,45,12,35,"getItem"],[20,52,12,42],[20,53,12,43],[20,68,12,58],[20,69,12,59],[21,4,14,2],[21,10,14,8,"headers"],[21,17,14,39],[21,20,14,42],[22,6,15,4],[22,20,15,18],[22,22,15,20],[22,40,15,38],[23,6,16,4],[23,9,16,7,"options"],[23,16,16,14],[23,17,16,15,"headers"],[24,4,17,2],[24,5,17,3],[25,4,19,2],[25,8,19,6,"token"],[25,13,19,11],[25,15,19,13],[26,6,20,4,"headers"],[26,13,20,11],[26,14,20,12],[26,29,20,27],[26,30,20,28],[26,33,20,31],[26,43,20,41,"token"],[26,48,20,46],[26,50,20,48],[27,4,21,2],[28,4,23,2],[28,10,23,8,"response"],[28,18,23,16],[28,21,23,19],[28,27,23,25,"fetch"],[28,32,23,30],[28,33,23,31],[28,36,23,34,"API_URL"],[28,43,23,41],[28,46,23,44,"endpoint"],[28,54,23,52],[28,56,23,54],[28,58,23,56],[29,6,24,4,"method"],[29,12,24,10],[29,14,24,12,"options"],[29,21,24,19],[29,22,24,20,"method"],[29,28,24,26],[29,32,24,30],[29,37,24,35],[30,6,25,4,"headers"],[30,13,25,11],[31,6,26,4,"body"],[31,10,26,8],[31,12,26,10,"options"],[31,19,26,17],[31,20,26,18,"body"],[31,24,26,22],[31,27,26,25,"JSON"],[31,31,26,29],[31,32,26,30,"stringify"],[31,41,26,39],[31,42,26,40,"options"],[31,49,26,47],[31,50,26,48,"body"],[31,54,26,52],[31,55,26,53],[31,58,26,56,"undefined"],[32,4,27,2],[32,5,27,3],[32,6,27,4],[33,4,29,2],[33,8,29,6],[33,9,29,7,"response"],[33,17,29,15],[33,18,29,16,"ok"],[33,20,29,18],[33,22,29,20],[34,6,30,4],[34,12,30,10,"errorData"],[34,21,30,19],[34,24,30,22],[34,30,30,28,"response"],[34,38,30,36],[34,39,30,37,"json"],[34,43,30,41],[34,44,30,42],[34,45,30,43],[34,46,30,44,"catch"],[34,51,30,49],[34,52,30,50],[34,59,30,57],[35,8,30,59,"detail"],[35,14,30,65],[35,16,30,67],[36,6,30,82],[36,7,30,83],[36,8,30,84],[36,9,30,85],[37,6,31,4],[37,12,31,10],[37,16,31,14,"Error"],[37,21,31,19],[37,22,31,20,"errorData"],[37,31,31,29],[37,32,31,30,"detail"],[37,38,31,36],[37,42,31,40],[37,57,31,55],[37,58,31,56],[38,4,32,2],[39,4,34,2],[39,11,34,9,"response"],[39,19,34,17],[39,20,34,18,"json"],[39,24,34,22],[39,25,34,23],[39,26,34,24],[40,2,35,0],[42,2,37,0],[43,2,38,7],[43,17,38,22,"uploadFileWeb"],[43,30,38,35,"uploadFileWeb"],[43,31,38,36,"endpoint"],[43,39,38,52],[43,41,38,54,"file"],[43,45,38,64],[43,47,38,66],[44,4,39,2],[44,10,39,8,"token"],[44,15,39,13],[44,18,39,16],[44,24,39,22,"AsyncStorage"],[44,36,39,34],[44,37,39,34,"default"],[44,44,39,34],[44,45,39,35,"getItem"],[44,52,39,42],[44,53,39,43],[44,68,39,58],[44,69,39,59],[45,4,41,2],[45,10,41,8,"formData"],[45,18,41,16],[45,21,41,19],[45,25,41,23,"FormData"],[45,33,41,31],[45,34,41,32],[45,35,41,33],[46,4,42,2,"formData"],[46,12,42,10],[46,13,42,11,"append"],[46,19,42,17],[46,20,42,18],[46,26,42,24],[46,28,42,26,"file"],[46,32,42,30],[46,34,42,32,"file"],[46,38,42,36],[46,39,42,37,"name"],[46,43,42,41],[46,44,42,42],[47,4,44,2],[47,10,44,8,"headers"],[47,17,44,39],[47,20,44,42],[47,21,44,43],[47,22,44,44],[48,4,45,2],[48,8,45,6,"token"],[48,13,45,11],[48,15,45,13],[49,6,46,4,"headers"],[49,13,46,11],[49,14,46,12],[49,29,46,27],[49,30,46,28],[49,33,46,31],[49,43,46,41,"token"],[49,48,46,46],[49,50,46,48],[50,4,47,2],[51,4,49,2],[51,10,49,8,"response"],[51,18,49,16],[51,21,49,19],[51,27,49,25,"fetch"],[51,32,49,30],[51,33,49,31],[51,36,49,34,"API_URL"],[51,43,49,41],[51,46,49,44,"endpoint"],[51,54,49,52],[51,56,49,54],[51,58,49,56],[52,6,50,4,"method"],[52,12,50,10],[52,14,50,12],[52,20,50,18],[53,6,51,4,"headers"],[53,13,51,11],[54,6,52,4,"body"],[54,10,52,8],[54,12,52,10,"formData"],[55,4,53,2],[55,5,53,3],[55,6,53,4],[56,4,55,2],[56,8,55,6],[56,9,55,7,"response"],[56,17,55,15],[56,18,55,16,"ok"],[56,20,55,18],[56,22,55,20],[57,6,56,4],[57,12,56,10,"errorData"],[57,21,56,19],[57,24,56,22],[57,30,56,28,"response"],[57,38,56,36],[57,39,56,37,"json"],[57,43,56,41],[57,44,56,42],[57,45,56,43],[57,46,56,44,"catch"],[57,51,56,49],[57,52,56,50],[57,59,56,57],[58,8,56,59,"detail"],[58,14,56,65],[58,16,56,67],[59,6,56,82],[59,7,56,83],[59,8,56,84],[59,9,56,85],[60,6,57,4],[60,12,57,10],[60,16,57,14,"Error"],[60,21,57,19],[60,22,57,20,"errorData"],[60,31,57,29],[60,32,57,30,"detail"],[60,38,57,36],[60,42,57,40],[60,57,57,55],[60,58,57,56],[61,4,58,2],[62,4,60,2],[62,11,60,9,"response"],[62,19,60,17],[62,20,60,18,"json"],[62,24,60,22],[62,25,60,23],[62,26,60,24],[63,2,61,0],[64,2,63,7],[64,17,63,22,"uploadFile"],[64,27,63,32,"uploadFile"],[64,28,63,33,"endpoint"],[64,36,63,49],[64,38,63,51,"file"],[64,42,63,100],[64,44,63,102],[65,4,64,2],[65,10,64,8,"token"],[65,15,64,13],[65,18,64,16],[65,24,64,22,"AsyncStorage"],[65,36,64,34],[65,37,64,34,"default"],[65,44,64,34],[65,45,64,35,"getItem"],[65,52,64,42],[65,53,64,43],[65,68,64,58],[65,69,64,59],[66,4,66,2],[66,10,66,8,"formData"],[66,18,66,16],[66,21,66,19],[66,25,66,23,"FormData"],[66,33,66,31],[66,34,66,32],[66,35,66,33],[68,4,68,2],[69,4,69,2],[69,8,69,6],[69,15,69,13,"window"],[69,21,69,19],[69,26,69,24],[69,37,69,35],[69,41,69,39,"file"],[69,45,69,43],[69,46,69,44,"uri"],[69,49,69,47],[69,50,69,48,"startsWith"],[69,60,69,58],[69,61,69,59],[69,68,69,66],[69,69,69,67],[69,71,69,69],[70,6,70,4],[71,6,71,4],[71,12,71,10,"response"],[71,20,71,18],[71,23,71,21],[71,29,71,27,"fetch"],[71,34,71,32],[71,35,71,33,"file"],[71,39,71,37],[71,40,71,38,"uri"],[71,43,71,41],[71,44,71,42],[72,6,72,4],[72,12,72,10,"blob"],[72,16,72,14],[72,19,72,17],[72,25,72,23,"response"],[72,33,72,31],[72,34,72,32,"blob"],[72,38,72,36],[72,39,72,37],[72,40,72,38],[73,6,73,4],[73,12,73,10,"fileObj"],[73,19,73,17],[73,22,73,20],[73,26,73,24,"File"],[73,30,73,28],[73,31,73,29],[73,32,73,30,"blob"],[73,36,73,34],[73,37,73,35],[73,39,73,37,"file"],[73,43,73,41],[73,44,73,42,"name"],[73,48,73,46],[73,50,73,48],[74,8,73,50,"type"],[74,12,73,54],[74,14,73,56,"file"],[74,18,73,60],[74,19,73,61,"type"],[75,6,73,66],[75,7,73,67],[75,8,73,68],[76,6,74,4,"formData"],[76,14,74,12],[76,15,74,13,"append"],[76,21,74,19],[76,22,74,20],[76,28,74,26],[76,30,74,28,"fileObj"],[76,37,74,35],[76,38,74,36],[77,4,75,2],[77,5,75,3],[77,11,75,9],[77,15,75,13],[77,22,75,20,"window"],[77,28,75,26],[77,33,75,31],[77,44,75,42],[77,48,75,46,"file"],[77,52,75,50],[77,53,75,51,"uri"],[77,56,75,54],[77,57,75,55,"startsWith"],[77,67,75,65],[77,68,75,66],[77,75,75,73],[77,76,75,74],[77,78,75,76],[78,6,76,4],[79,6,77,4],[79,12,77,10,"response"],[79,20,77,18],[79,23,77,21],[79,29,77,27,"fetch"],[79,34,77,32],[79,35,77,33,"file"],[79,39,77,37],[79,40,77,38,"uri"],[79,43,77,41],[79,44,77,42],[80,6,78,4],[80,12,78,10,"blob"],[80,16,78,14],[80,19,78,17],[80,25,78,23,"response"],[80,33,78,31],[80,34,78,32,"blob"],[80,38,78,36],[80,39,78,37],[80,40,78,38],[81,6,79,4],[81,12,79,10,"fileObj"],[81,19,79,17],[81,22,79,20],[81,26,79,24,"File"],[81,30,79,28],[81,31,79,29],[81,32,79,30,"blob"],[81,36,79,34],[81,37,79,35],[81,39,79,37,"file"],[81,43,79,41],[81,44,79,42,"name"],[81,48,79,46],[81,50,79,48],[82,8,79,50,"type"],[82,12,79,54],[82,14,79,56,"file"],[82,18,79,60],[82,19,79,61,"type"],[83,6,79,66],[83,7,79,67],[83,8,79,68],[84,6,80,4,"formData"],[84,14,80,12],[84,15,80,13,"append"],[84,21,80,19],[84,22,80,20],[84,28,80,26],[84,30,80,28,"fileObj"],[84,37,80,35],[84,38,80,36],[85,4,81,2],[85,5,81,3],[85,11,81,9],[86,6,82,4],[87,6,83,4,"formData"],[87,14,83,12],[87,15,83,13,"append"],[87,21,83,19],[87,22,83,20],[87,28,83,26],[87,30,83,28],[88,8,84,6,"uri"],[88,11,84,9],[88,13,84,11,"file"],[88,17,84,15],[88,18,84,16,"uri"],[88,21,84,19],[89,8,85,6,"name"],[89,12,85,10],[89,14,85,12,"file"],[89,18,85,16],[89,19,85,17,"name"],[89,23,85,21],[90,8,86,6,"type"],[90,12,86,10],[90,14,86,12,"file"],[90,18,86,16],[90,19,86,17,"type"],[91,6,87,4],[91,7,87,12],[91,8,87,13],[92,4,88,2],[93,4,90,2],[93,10,90,8,"headers"],[93,17,90,39],[93,20,90,42],[93,21,90,43],[93,22,90,44],[94,4,91,2],[94,8,91,6,"token"],[94,13,91,11],[94,15,91,13],[95,6,92,4,"headers"],[95,13,92,11],[95,14,92,12],[95,29,92,27],[95,30,92,28],[95,33,92,31],[95,43,92,41,"token"],[95,48,92,46],[95,50,92,48],[96,4,93,2],[97,4,95,2],[97,10,95,8,"response"],[97,18,95,16],[97,21,95,19],[97,27,95,25,"fetch"],[97,32,95,30],[97,33,95,31],[97,36,95,34,"API_URL"],[97,43,95,41],[97,46,95,44,"endpoint"],[97,54,95,52],[97,56,95,54],[97,58,95,56],[98,6,96,4,"method"],[98,12,96,10],[98,14,96,12],[98,20,96,18],[99,6,97,4,"headers"],[99,13,97,11],[100,6,98,4,"body"],[100,10,98,8],[100,12,98,10,"formData"],[101,4,99,2],[101,5,99,3],[101,6,99,4],[102,4,101,2],[102,8,101,6],[102,9,101,7,"response"],[102,17,101,15],[102,18,101,16,"ok"],[102,20,101,18],[102,22,101,20],[103,6,102,4],[103,12,102,10,"errorData"],[103,21,102,19],[103,24,102,22],[103,30,102,28,"response"],[103,38,102,36],[103,39,102,37,"json"],[103,43,102,41],[103,44,102,42],[103,45,102,43],[103,46,102,44,"catch"],[103,51,102,49],[103,52,102,50],[103,59,102,57],[104,8,102,59,"detail"],[104,14,102,65],[104,16,102,67],[105,6,102,82],[105,7,102,83],[105,8,102,84],[105,9,102,85],[106,6,103,4],[106,12,103,10],[106,16,103,14,"Error"],[106,21,103,19],[106,22,103,20,"errorData"],[106,31,103,29],[106,32,103,30,"detail"],[106,38,103,36],[106,42,103,40],[106,57,103,55],[106,58,103,56],[107,4,104,2],[108,4,106,2],[108,11,106,9,"response"],[108,19,106,17],[108,20,106,18,"json"],[108,24,106,22],[108,25,106,23],[108,26,106,24],[109,2,107,0],[110,0,107,1],[110,3]],"functionMap":{"names":["<global>","apiFetch","response.json._catch$argument_0","uploadFileWeb","uploadFile"],"mappings":"AAA;OCU;kDCmB,kCD;CDK;OGG;kDDkB,kCC;CHK;OIE;kDFuC,kCE;CJK"},"hasCjsExports":false},"type":"js/module"}]}